# Добро пожаловать!
Репозиторий позволяет развернуть стек контейнеров в __Docker__. Будет создано пять контейнеров:
* [MariaDB](https://mariadb.org/) - ответвление от системы управления базами данных __MySQL__, разрабатываемое сообществом под лицензией GNU GPL;
* [PHPMyAdmin](https://www.phpmyadmin.net/) - веб-приложение с открытым кодом, написанное на языке __PHP__ и представляющее собой веб-интерфейс для администрирования СУБД __MySQL__
* [Composer](https://getcomposer.org/) - это пакетный менеджер уровня приложений для языка программирования __PHP__, который предоставляет средства по управлению зависимостями в __PHP-приложении__;
* [PHP-FPM](https://www.php.net/manual/ru/install.fpm.php) - является альтернативной реализацией __PHP FastCGI__ с несколькими дополнительными возможностями обычно используемыми для высоконагруженных сайтов;
* [NGINX](https://nginx.org/ru/) - веб-сервер и почтовый прокси-сервер, работающий на __Unix-подобных__ операционных системах.

## Установка
1. Создайте директорию для __Docker__ проектов (если еще не создавали) в домашнюю директорию ```mkdir ~/Dockers```;
2. Зайдите в директорию ```cd ~/Dockers``` и клонируйте репозиторий ```git clone https://github.com/btn441/docker-npmc.git``` или через ssh ```git clone git@github.com:btn441/docker-npmc.git```;
3. Создайте директорию ```mkdir ~/Backends``` где будут хранится проекты.
4. Теперь давайте добавим в конец строчку ```127.0.0.1 example.test``` в файл ```sudo nano /etc/hosts```. Мы для себя откроет домен __example.test__;
5. Отлично! Давайте теперь зайдем ```cd ~/docker-npmc/nginx/sites/``` и посмотрим фалы ```ls```. Мы видим __example.conf__. Для каждого проекта создаем и редактируем данные конфиги;
6. По идеи всё! Осталось почитать документацию ниже, о том как с этим всем работать __;)__

## Docker
Репозиторий предпологает, что у нас установленны ```docker``` и ```docker-compose```. </br>
Чтобы не писать перед __Docker__ командами __sudo__, добавьте вашего пользователя в группу ```docker```. </br>
Полезные комманды, для __Docker__:
* ```docker-composer up``` - запустить __Docker__ (не в фоне);
* ```docker ps``` - посмореть активные контейнеры;
* ```docker exec -tiu root {name_container} bash -l``` - зайти в контейнер (```{name_container}``` - название контейнера).

## NGINX
Все новые домены для проектов не забывайте записывать в ```/etc/hosts```! Пример ```127.0.0.1 examlpe.test```. </br>
Все наши домены должны оканчиваться на __.test__ (не обязательно).</br>
Каждый новый проект клонируется в директорию ```cd ~/Backends/``` и добавляется новый конфиг в __NGINX__ ```cd ~/Docker/docker-npmc/nginx/sites/```. Ну и не забываем про ```/etc/hosts```.

## Composer
Зависимости можно обновлять через контейнер __composer__. </br>
Зайдите в контейнер ```docker exec -tiu root backends_composer_1 bash -l```, выберите проект ```ls && cd example``` и вводите команды связанные с __composer__.

## PHP-FPM
С проектом __PHP__ можно общаться через контейнер __php-fpm__. </br>
Зайдите в контейнер ```docker exec -tiu root backends_php-fpm_1 bash -l```, выберите проект ```ls && cd example``` и вводите команды связанные с __php-fpm__.

## Database
БД у нас будет использоваться __MariaDB__.</br>
Логи: __root__</br> 
Пароль: __docker__

## PHPMyAdmin
Чтобы делать изменения напрямую в __MariaDB__, у нас есть __PHPMyAdmin__.</br>
Ссылка http://localhost:8765

Еще пишем...
